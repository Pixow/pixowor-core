{"version":3,"file":"game.js","sourceRoot":"","sources":["../../../src/models/game.ts"],"names":[],"mappings":"AAEA,MAAM,CAAN,IAAY,UAIX;AAJD,WAAY,UAAU;IACpB,iCAAmB,CAAA;IACnB,mCAAqB,CAAA;IACrB,+BAAiB,CAAA;AACnB,CAAC,EAJW,UAAU,KAAV,UAAU,QAIrB;AAED;IAME,qBAAY,IAA2B;QACrC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC5B,CAAC;IACH,kBAAC;AAAD,CAAC,AATD,IASC;;AAED;IAwBE,cAAY,IAAoB;QAC9B,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC5B,CAAC;IAEM,qBAAM,GAAb,UAAc,OAAe;QAC3B,0EAA0E;QAC1E,OAAU,IAAI,CAAC,KAAK,CAAC,QAAQ,cAAS,IAAI,CAAC,GAAG,SAAI,OAAO,SAAI,IAAI,CAAC,GAAG,SAAM,CAAC;IAC9E,CAAC;IAED,sBAAW,2BAAS;aAApB;YACE,OAAU,IAAI,CAAC,KAAK,CAAC,QAAQ,cAAS,IAAI,CAAC,GAAK,CAAC;QACnD,CAAC;;;OAAA;IAED,sBAAW,oBAAE;aAAb;YACE,OAAU,IAAI,CAAC,SAAS,SAAI,IAAI,CAAC,GAAG,QAAK,CAAC;QAC5C,CAAC;;;OAAA;IAED,sBAAW,yBAAO;aAAlB;YACE,OAAU,IAAI,CAAC,SAAS,kBAAe,CAAC;QAC1C,CAAC;;;OAAA;IACH,WAAC;AAAD,CAAC,AA5CD,IA4CC","sourcesContent":["import { User } from \"./user\";\r\n\r\nexport enum Visibility {\r\n  Private = \"Private\",\r\n  Internal = \"Internal\",\r\n  Public = \"Public\",\r\n}\r\n\r\nexport class GameVersion {\r\n  gameConfig: string[];\r\n  createdAt: string;\r\n  version: string;\r\n  commit: string;\r\n\r\n  constructor(init?: Partial<GameVersion>) {\r\n    Object.assign(this, init);\r\n  }\r\n}\r\n\r\nexport class Game {\r\n  _id: string;\r\n  serverStatus: number;\r\n  cover: string; // 封面图\r\n  tags: string[];\r\n  visibility: Visibility;\r\n  template: boolean;\r\n  thumbnails: string[];\r\n  version: string; // 当前运行的发布版本\r\n  lastVersion: string; // 最后修改版本\r\n  liked_count: number;\r\n  unliked_count: number;\r\n  recommendedLevel: number;\r\n  owner: User;\r\n  name: string;\r\n  description: string;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n  releaseVersions: GameVersion[];\r\n  pastVersions: GameVersion[];\r\n  visitsUpdateAt: string;\r\n  positiveRateUpdateAt: string;\r\n  incomeTuDingUpdateAt: string;\r\n\r\n  constructor(data?: Partial<Game>) {\r\n    Object.assign(this, data);\r\n  }\r\n\r\n  public getUri(version: string) {\r\n    // mjxmjx\\game\\5f1a49e2b5ad7b67aae31170\\0.0.4\\5f1a49e2b5ad7b67aae31170.zip\r\n    return `${this.owner.username}/game/${this._id}/${version}/${this._id}.zip`;\r\n  }\r\n\r\n  public get directory() {\r\n    return `${this.owner.username}/game/${this._id}`;\r\n  }\r\n\r\n  public get pi() {\r\n    return `${this.directory}/${this._id}.pi`;\r\n  }\r\n\r\n  public get package() {\r\n    return `${this.directory}/package.json`;\r\n  }\r\n}\r\n"]}