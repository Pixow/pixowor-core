{"version":3,"file":"state-manager.js","sourceRoot":"","sources":["../../src/state-manager.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,MAAM,MAAM,CAAC;AAGvC;;GAEG;AACH;IAAA;QACU,aAAQ,GAAwB,IAAI,GAAG,EAAkB,CAAC;QAC1D,eAAU,GAAsC,IAAI,GAAG,EAG5D,CAAC;QACI,gBAAW,GAA2B,IAAI,GAAG,EAAqB,CAAC;IAiC7E,CAAC;IA/BC,uCAAgB,GAAhB,UAAiB,IAAY,EAAE,IAAU;QACvC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,eAAe,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAC;IAC/D,CAAC;IAED,yCAAkB,GAAlB,UAAmB,IAAY;QAC7B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED,kCAAW,GAAX,UAAe,IAAY;QACzB,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAED,qCAAc,GAAd,UAAe,MAAc;QAC3B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;IACxC,CAAC;IAED,gCAAS,GAAT,UAAU,EAAU;QAClB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAC/B,CAAC;IAED,wCAAiB,GAAjB,UAAkB,IAAY,EAAE,SAAoB;QAClD,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IACxC,CAAC;IAED,uCAAgB,GAAhB,UAAiB,IAAY;QAC3B,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAED,mCAAY,GAAZ,UAAa,IAAY;QACvB,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACpC,CAAC;IACH,mBAAC;AAAD,CAAC,AAvCD,IAuCC","sourcesContent":["import { Component, Type } from \"@angular/core\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { Plugin } from \"./plugin\";\r\n\r\n/**\r\n * State contain installed plugin, registed variables and registed angular components.\r\n */\r\nexport class StateManager {\r\n  private _plugins: Map<string, Plugin> = new Map<string, Plugin>();\r\n  private _variables: Map<string, BehaviorSubject<any>> = new Map<\r\n    string,\r\n    BehaviorSubject<any>\r\n  >();\r\n  private _components: Map<string, Component> = new Map<string, Component>();\r\n\r\n  registerVariable(name: string, data?: any) {\r\n    this._variables.set(name, new BehaviorSubject(data || null));\r\n  }\r\n\r\n  unRegisterVariable(name: string) {\r\n    this._variables.delete(name);\r\n  }\r\n\r\n  getVariable<T>(name: string): BehaviorSubject<T> {\r\n    return this._variables.get(name);\r\n  }\r\n\r\n  registerPlugin(plugin: Plugin) {\r\n    this._plugins.set(plugin.pid, plugin);\r\n  }\r\n\r\n  getPlugin(id: string): Plugin {\r\n    return this._plugins.get(id);\r\n  }\r\n\r\n  registerComponent(name: string, component: Component) {\r\n    this._components.set(name, component);\r\n  }\r\n\r\n  destroyComponent(name: string) {\r\n    this._components.delete(name);\r\n  }\r\n\r\n  getComponent(name: string): Component {\r\n    return this._components.get(name);\r\n  }\r\n}\r\n"]}