{"version":3,"file":"state.js","sourceRoot":"","sources":["../../src/state.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,eAAe,EAAE,MAAM,MAAM,CAAA;AAGtC;;GAEG;AACH;IAAA;QACS,aAAQ,GAAwB,IAAI,GAAG,EAAkB,CAAC;QAC1D,eAAU,GAAsC,IAAI,GAAG,EAAgC,CAAA;QACvF,gBAAW,GAA2B,IAAI,GAAG,EAAqB,CAAC;IA0B5E,CAAC;IAxBA,gCAAgB,GAAhB,UAAiB,IAAY,EAAE,IAAU;QACxC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,eAAe,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC,CAAA;IAC7D,CAAC;IAED,2BAAW,GAAX,UAAY,IAAY;QACvB,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IACjC,CAAC;IAED,8BAAc,GAAd,UAAe,MAAc;QAC5B,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;IAC9C,CAAC;IAED,yBAAS,GAAT,UAAU,EAAU;QACnB,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;IAC7B,CAAC;IAED,iCAAiB,GAAjB,UAAkB,SAAoB;QACrC,IAAM,IAAI,GAAG,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC;QACxC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;IACvC,CAAC;IAED,4BAAY,GAAZ,UAAa,IAAY;QACxB,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IACF,YAAC;AAAD,CAAC,AA7BD,IA6BC","sourcesContent":["import { Component, Type } from \"@angular/core\";\r\nimport { BehaviorSubject } from \"rxjs\"\r\nimport { Plugin } from \"src\"\r\n\r\n/**\r\n * State contain installed plugin, registed variables and registed angular components. \r\n */\r\nexport class State {\r\n\tprivate _plugins: Map<string, Plugin> = new Map<string, Plugin>();\r\n\tprivate _variables: Map<string, BehaviorSubject<any>> = new Map<string, BehaviorSubject<any>>()\r\n\tprivate _components: Map<string, Component> = new Map<string, Component>();\r\n\r\n\tregisterVariable(name: string, data?: any) {\r\n\t\tthis._variables.set(name, new BehaviorSubject(data || null))\r\n\t}\r\n\r\n\tgetVariable(name: string) {\r\n\t\treturn this._variables.get(name)\r\n\t}\r\n\r\n\tregisterPlugin(plugin: Plugin) {\r\n\t\tthis._plugins.set(plugin.manifest.id, plugin)\r\n\t}\r\n\r\n\tgetPlugin(id: string): Plugin {\r\n\t\treturn this._plugins.get(id)\r\n\t}\r\n\r\n\tregisterComponent(component: Component) {\r\n\t\tconst name = component.constructor.name;\r\n\t\tthis._components.set(name, component);\r\n\t}\r\n\r\n\tgetComponent(name: string): Component {\r\n\t\treturn this._components.get(name);\r\n\t}\r\n}"]}