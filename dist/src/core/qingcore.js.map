{"version":3,"file":"qingcore.js","sourceRoot":"","sources":["../../../src/core/qingcore.ts"],"names":[],"mappings":"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","sourcesContent":["import { EreMessageChannel as msgc } from \"electron-re\";\r\nimport { Event, IPlugin, PluginStore } from \"angular-pluggable\";\r\nimport {\r\n  AlertEvent,\r\n  IOOperates,\r\n  LoadInDialogEvent,\r\n  LoadInEditorAreaEvent,\r\n  LoadInMenuEvent,\r\n  LoadInPanelEvent,\r\n  LoadInSidebarEvent,\r\n  LoadInWidgetBarEvent,\r\n  ToastEvent,\r\n} from \"./events\";\r\nimport { Service } from \"typedi\";\r\n\r\nexport enum Severity {\r\n  SUCCESS = \"success\",\r\n  ERROR = \"error\",\r\n  INFO = \"info\",\r\n}\r\n\r\ntype MsgcResponse = {\r\n  error: Error | null;\r\n  data: any;\r\n};\r\n\r\n@Service()\r\nexport class QingCore extends PluginStore {\r\n  private pluginVariables = new Map<string, string[]>();\r\n  static IoServiceName: string = \"io-service\";\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /****************************** UI Api *****************************/\r\n\r\n  public Toast(severity: Severity, message: string) {\r\n    this.Emit(new ToastEvent(severity, message));\r\n  }\r\n\r\n  public Alert(message: string) {\r\n    this.Emit(new AlertEvent(message));\r\n  }\r\n\r\n  public LoadInDialog(componentName: string) {\r\n    this.Emit(new LoadInDialogEvent(componentName));\r\n  }\r\n\r\n  public LoadInMenu(componentName: string) {\r\n    this.Emit(new LoadInMenuEvent(componentName));\r\n  }\r\n\r\n  public LoadInSidebar(componentName: string) {\r\n    this.Emit(new LoadInSidebarEvent(componentName));\r\n  }\r\n\r\n  public LoadInEditorArea(componentName: string) {\r\n    this.Emit(new LoadInEditorAreaEvent(componentName));\r\n  }\r\n\r\n  public LoadInPanel(componentName: string) {\r\n    this.Emit(new LoadInPanelEvent(componentName));\r\n  }\r\n\r\n  public LoadInWidgetBar(componentName: string) {\r\n    this.Emit(new LoadInWidgetBarEvent(componentName));\r\n  }\r\n\r\n  public RegistVariable(pluginName: string, varName: string, data: any) {\r\n    const variables = this.pluginVariables.get(pluginName);\r\n    if (typeof variables === \"object\" && variables.length > 0) {\r\n      if (variables.indexOf(varName) < 0) {\r\n        this.registObserver(varName, data);\r\n      }\r\n    } else {\r\n      this.pluginVariables.set(pluginName, [varName]);\r\n      this.registObserver(varName, data);\r\n    }\r\n  }\r\n\r\n  public GetVariable(varName: string) {\r\n    return this.getObserver(varName) as any;\r\n  }\r\n  /*******************************************************************************/\r\n\r\n  /****************************** Event Listener Api *****************************/\r\n  public Emit(event: Event) {\r\n    this.dispatchEvent(event);\r\n  }\r\n\r\n  public On(eventName: string, listener: (event: Event) => void) {\r\n    this.addEventListener(eventName, listener);\r\n  }\r\n\r\n  public Once(eventName: string, listener: (event: Event) => void) {\r\n    this.addOnceEventListener(eventName, listener);\r\n  }\r\n  /*******************************************************************************/\r\n\r\n  /****************************** IO Api *****************************************/\r\n  public ListDir(dir: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.LISTDIR, {\r\n          dir,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public RemoveDir(dir: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.REMOVEDIR, { dir })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public ReadFile(file: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.READFILE, {\r\n          file,\r\n          options: { encoding: \"utf8\" },\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public WriteFile(file: string, data: any) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.WRITEFILE, {\r\n          file,\r\n          data,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public RemoveFile(file: string, data: any) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.REMOVEFILE, {\r\n          file,\r\n          data,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public ReadJson(path: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.READJSON, {\r\n          path,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public WriteJson(path: string, data: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.WRITEJSON, {\r\n          path,\r\n          data,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public DownloadFile(url: string, output: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.DOWNLOADFILE, {\r\n          url,\r\n          output,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public UploadFile(file: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.UPLOADFILE, {\r\n          file,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public CopyFiles(files: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.COPYFILES, {\r\n          files,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public ZipFiles(files: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.ZIPFILES, {\r\n          files,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public Unzip(file: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOOperates.UNZIP, {\r\n          file,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  /*******************************************************************************/\r\n\r\n  public EnablePlugin(pluginName: string, pluginConfig: { [k: string]: any }) {}\r\n\r\n  public DisablePlugin(pluginName: string) {\r\n    const variables = this.pluginVariables.get(pluginName);\r\n\r\n    if (variables && variables.length > 0) {\r\n      const observers = variables.map((varName) =>\r\n        this.observerMap.get(varName)\r\n      );\r\n\r\n      observers.forEach((observer) => {\r\n        if (observer) {\r\n          observer.next(null);\r\n          observer.complete();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public Destroy() {\r\n    const observers = Array.from(this.observerMap.values());\r\n    observers.forEach((observer) => {\r\n      observer.next(null);\r\n      observer.complete();\r\n    });\r\n\r\n    super.removeAllListeners();\r\n  }\r\n}\r\n"]}