{"version":3,"file":"qing-core.js","sourceRoot":"","sources":["../../../src/core/qing-core.ts"],"names":[],"mappings":"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","sourcesContent":["import { EreMessageChannel as msgc } from \"electron-re\";\r\nimport { QingWebApiSdk } from \"qing-web-api-sdk\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { IOEvents, UIEvents } from \"./events\";\r\nimport { Event, PluginStore } from \"./plugin-store\";\r\nimport { Plugin } from \"./plugin\";\r\n\r\n\r\nexport enum Severity {\r\n  SUCCESS = \"success\",\r\n  ERROR = \"error\",\r\n  INFO = \"info\",\r\n}\r\n\r\nexport type MsgcResponse = {\r\n  error: Error | null;\r\n  data: any;\r\n};\r\n\r\nexport declare type Constructable<T> = new (...args: any[]) => T;\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class QingCore extends PluginStore {\r\n  static IoServiceName: string = \"io-service\";\r\n  private pluginVariables = new Map<string, string[]>();\r\n  private services = new Map<string, any>();\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * 将angular的service实例注入\r\n   * @param service AngularService\r\n   * @param serviceInstance AngularService Instance\r\n   */\r\n  public InjectService<T>(service: Constructable<T>, serviceInstance: T) {\r\n    this.services.set(service.name, serviceInstance);\r\n  }\r\n\r\n  /**\r\n   * 获取某个Service实例\r\n   * @param service \r\n   */\r\n  public GetService<T>(service: Constructable<T>) {\r\n    return this.services.get((service as any).name) as T;\r\n  }\r\n\r\n  /****************************** Plugin Api *****************************/\r\n\r\n  public InstallPlugin(plugin: Plugin) {\r\n    this.install(plugin);\r\n  }\r\n\r\n  public UninstallPlugin(pluginName: string) {\r\n    this.uninstall(pluginName);\r\n  }\r\n\r\n  public EnablePlugin(pluginName: string, pluginConfig: { [k: string]: any }) {}\r\n\r\n  public DisablePlugin(pluginName: string) {\r\n    const variables = this.pluginVariables.get(pluginName);\r\n\r\n    if (variables && variables.length > 0) {\r\n      const observers = variables.map((varName) =>\r\n        this.observerMap.get(varName)\r\n      );\r\n\r\n      observers.forEach((observer) => {\r\n        if (observer) {\r\n          observer.next(null);\r\n          observer.complete();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /*******************************************************************************/\r\n\r\n  /****************************** UI Api *****************************/\r\n\r\n  public Toast(severity: Severity, message: string) {\r\n    this.Emit(new Event(UIEvents.TOAST, { severity, message }));\r\n  }\r\n\r\n  public Alert(message: string) {\r\n    this.Emit(new Event(UIEvents.ALERT, { message }));\r\n  }\r\n\r\n  public OpenDialog(componentName: string) {\r\n    this.Emit(new Event(UIEvents.OPEN_DIALOG, { componentName }));\r\n  }\r\n\r\n  public CloseDialog() {\r\n    this.Emit(new Event(UIEvents.CLOSE_DIALOG));\r\n  }\r\n\r\n  public LoadInMenu(componentName: string) {\r\n    this.Emit(new Event(UIEvents.LOAD_IN_MENU, { componentName }));\r\n  }\r\n\r\n  public LoadInSidebar(componentName: string) {\r\n    this.Emit(new Event(UIEvents.LOAD_IN_SIDEBAR, { componentName }));\r\n  }\r\n\r\n  public LoadInEditorArea(componentName: string) {\r\n    this.Emit(new Event(UIEvents.LOAD_IN_EDITORAREA, { componentName }));\r\n  }\r\n\r\n  public LoadInConsolePanel(componentName: string) {\r\n    this.Emit(new Event(UIEvents.LOAD_IN_PANEL, { componentName }));\r\n  }\r\n\r\n  public LoadInWidgetBar(componentName: string) {\r\n    this.Emit(new Event(UIEvents.LOAD_IN_WIDGETBAR, { componentName }));\r\n  }\r\n\r\n  public RegistVariable(pluginName: string, varName: string, data: any) {\r\n    const variables = this.pluginVariables.get(pluginName);\r\n    if (typeof variables === \"object\" && variables.length > 0) {\r\n      if (variables.indexOf(varName) < 0) {\r\n        this.registObserver(varName, data);\r\n      }\r\n    } else {\r\n      this.pluginVariables.set(pluginName, [varName]);\r\n      this.registObserver(varName, data);\r\n    }\r\n  }\r\n\r\n  public GetVariable(varName: string) {\r\n    return this.getObserver(varName) as any;\r\n  }\r\n  /*******************************************************************************/\r\n\r\n  /****************************** Storage Api *****************************/\r\n  public Set(key: string, data: string | object) {\r\n    if (typeof data === \"object\") {\r\n      localStorage.setItem(key, JSON.stringify(data));\r\n    } else {\r\n      localStorage.setItem(key, data);\r\n    }\r\n  }\r\n\r\n  public Get(key: string) {\r\n    const data = localStorage.getItem(key);\r\n\r\n    if (!data) return null;\r\n\r\n    try {\r\n      return JSON.parse(data);\r\n    } catch (error) {\r\n      return data;\r\n    }\r\n  }\r\n\r\n  public Remove(key: string) {\r\n    localStorage.removeItem(key);\r\n  }\r\n  /*******************************************************************************/\r\n\r\n  /****************************** Event Listener Api *****************************/\r\n  public Emit(event: Event) {\r\n    this.dispatchEvent(event);\r\n  }\r\n\r\n  public On(eventName: string, listener: (event: Event) => void) {\r\n    this.addEventListener(eventName, listener);\r\n  }\r\n\r\n  public Once(eventName: string, listener: (event: Event) => void) {\r\n    this.addOnceEventListener(eventName, listener);\r\n  }\r\n\r\n  public Off(eventName: string, listener: (event: Event) => void) {\r\n    this.removeListener(eventName, listener)\r\n  }\r\n\r\n  public OffAll() {\r\n    this.removeAllEvents()\r\n  }\r\n  /*******************************************************************************/\r\n\r\n  public Invoke(funcName: string, ...args: any) {\r\n    return this.execFunction(funcName, ...args);\r\n  }\r\n\r\n  public Bind(funcName: string, fn: (...args: any) => void) {\r\n    this.addFunction(funcName, fn);\r\n  }\r\n\r\n  public UnBind(funcName: string) {\r\n    this.removeFunction(funcName);\r\n  }\r\n\r\n  /****************************** IO Api *****************************************/\r\n  public ListDir(dir: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.LISTDIR, {\r\n          dir,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public RemoveDir(dir: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.REMOVEDIR, { dir })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public ReadFile(file: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.READFILE, {\r\n          file,\r\n          options: { encoding: \"utf8\" },\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public WriteFile(file: string, data: any) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.WRITEFILE, {\r\n          file,\r\n          data,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public RemoveFile(file: string, data: any) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.REMOVEFILE, {\r\n          file,\r\n          data,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public ReadJson(path: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.READJSON, {\r\n          path,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public WriteJson(path: string, data: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.WRITEJSON, {\r\n          path,\r\n          data,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public DownloadFile(url: string, output: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.DOWNLOADFILE, {\r\n          url,\r\n          output,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public UploadFile(file: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.UPLOADFILE, {\r\n          file,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public CopyFiles(source: string, dest: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.COPYFILES, {\r\n          source,\r\n          dest\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public ZipFiles(files: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.ZIPFILES, {\r\n          files,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  public Unzip(file: string) {\r\n    return new Promise((resolve, reject) => {\r\n      msgc\r\n        .invoke(QingCore.IoServiceName, IOEvents.UNZIP, {\r\n          file,\r\n        })\r\n        .then((res: MsgcResponse) => {\r\n          const { error, data } = res;\r\n          if (error) {\r\n            reject(error);\r\n            return;\r\n          }\r\n\r\n          resolve(data);\r\n        });\r\n    });\r\n  }\r\n\r\n  /*******************************************************************************/\r\n\r\n  /****************************** Web Service Api *****************************************/\r\n\r\n  public get WebServiceSdk() {\r\n    return QingWebApiSdk.getInstance();\r\n  }\r\n  /*******************************************************************************/\r\n\r\n  public Destroy() {\r\n    const observers = Array.from(this.observerMap.values());\r\n    observers.forEach((observer) => {\r\n      observer.next(null);\r\n      observer.complete();\r\n    });\r\n\r\n    super.removeAllListeners();\r\n\r\n    this.OffAll()\r\n  }\r\n}\r\n"]}